# H5页面部署到Netlify指南

## 快速部署步骤

### 1. 准备文件

主站为 React SPA（`index.html`）。经期管理 H5 为 SPA 内路由：
- 介绍页：`/habit/period/intro`
- 主功能页：`/habit/period`
- 首次初始化：`/habit/period/onboarding`
- 另需：`privacy.html`、`terms.html`（独立入口）

### 2. 部署到Netlify

**方法一：拖拽部署（最简单）**

1. 访问 [Netlify](https://app.netlify.com)
2. 注册/登录账号
3. 将 `website/` 文件夹拖拽到Netlify的部署区域
4. 等待部署完成
5. 获取URL（例如：`https://random-name-12345.netlify.app`）

**方法二：GitHub自动部署**

1. 将代码推送到GitHub
2. 在Netlify中点击"New site from Git"
3. 选择你的GitHub仓库
4. 设置：
   - Base directory: `website`
   - Build command: 留空
   - Publish directory: `.`
5. 点击"Deploy site"

### 3. 在App中配置URL

编辑 `HabitWebViewActivity.java`，将URL改为你的Netlify地址：

```java
if (TextUtils.isEmpty(h5BaseUrl)) {
    h5BaseUrl = "https://your-netlify-url.netlify.app";
}
```

### 4. 测试

1. 编译并运行 App
2. 进入习惯库，点击「大姨妈管理」
3. 应先进入介绍页（或直接进主功能页），主功能为经期日历与记录
4. 确认页面来自 `https://tinyhabits.top/habit/period` 或 `/habit/period/intro`

## 本地测试

```bash
cd website
python -m http.server 8080
# 或
npx http-server -p 8080
```

然后在App中使用：`http://你的电脑IP:8080`

## 更新H5页面

修改HTML文件后：
1. 如果使用拖拽部署：重新拖拽 `website/` 文件夹
2. 如果使用GitHub：推送代码即可自动部署

## 常见问题

**Q: 页面加载失败？**
A: 检查网络连接和URL是否正确

**Q: JavaScript接口调用失败？**
A: 打开Chrome的 `chrome://inspect` 查看WebView日志

**Q: 如何自定义域名？**
A: 在Netlify控制台的"Domain settings"中配置
